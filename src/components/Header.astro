---
const pathname = Astro.url.pathname
---

<div class='relative'>
  <div
    id='header'
    class={`${pathname === '/' ? 'text-sand' : ''} w-full flex justify-between items-start md:items-center py-3 px-3 md:px-8`}
  >
    <h1 class='text-xl italic dancing-script z-50'>
      <a href='/'>La RÃ©serve Golf</a>
    </h1>
    <div
      id='nav-menu'
      class='flex flex-col md:flex-row max-md:hidden transition-all duration-700 ease-in-out max-md:absolute max-md:top-16 max-md:right-3 items-start md:items-center gap-5 max-md:bg-olive max-md:p-4 max-md:py-6 rounded-xl'
    >
      <div class='relative'>
        <input
          type='text'
          id='search'
          class={`border-b ${pathname === '/' ? 'border-b-sand' : ''} max-md:border-b-sand ps-8 md:ps-6.5 pb-0.5 focus:outline-none`}
        />
        <span class='absolute left-0 bottom-1'>
          <svg
            class='w-5 h-5 max-md:text-sand'
            aria-hidden='true'
            xmlns='http://www.w3.org/2000/svg'
            width='24'
            height='24'
            fill='none'
            viewBox='0 0 24 24'
          >
            <path
              stroke='currentColor'
              stroke-linecap='round'
              stroke-width='2'
              d='m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z'></path>
          </svg>
        </span>
      </div>
      <a href='#' class='flex items-center gap-2'>
        <svg
          class='w-6 h-6 max-md:text-sand'
          aria-hidden='true'
          xmlns='http://www.w3.org/2000/svg'
          width='24'
          height='24'
          fill='none'
          viewBox='0 0 24 24'
        >
          <path
            stroke='currentColor'
            stroke-linecap='round'
            stroke-linejoin='round'
            stroke-width='2'
            d='M9 10V6a3 3 0 0 1 3-3v0a3 3 0 0 1 3 3v4m3-2 .917 11.923A1 1 0 0 1 17.92 21H6.08a1 1 0 0 1-.997-1.077L6 8h12Z'
          ></path>
        </svg>
        <span class='md:hidden text-xl max-md:text-sand'>Cart</span>
      </a>
      <a href='/products' class='flex items-center gap-2'>
        <svg
          class='w-6 h-6 max-md:text-sand'
          aria-hidden='true'
          xmlns='http://www.w3.org/2000/svg'
          width='24'
          height='24'
          fill='none'
          viewBox='0 0 24 24'
        >
          <path
            stroke='currentColor'
            stroke-linecap='round'
            stroke-linejoin='round'
            stroke-width='2'
            d='M9.143 4H4.857A.857.857 0 0 0 4 4.857v4.286c0 .473.384.857.857.857h4.286A.857.857 0 0 0 10 9.143V4.857A.857.857 0 0 0 9.143 4Zm10 0h-4.286a.857.857 0 0 0-.857.857v4.286c0 .473.384.857.857.857h4.286A.857.857 0 0 0 20 9.143V4.857A.857.857 0 0 0 19.143 4Zm-10 10H4.857a.857.857 0 0 0-.857.857v4.286c0 .473.384.857.857.857h4.286a.857.857 0 0 0 .857-.857v-4.286A.857.857 0 0 0 9.143 14Zm10 0h-4.286a.857.857 0 0 0-.857.857v4.286c0 .473.384.857.857.857h4.286a.857.857 0 0 0 .857-.857v-4.286a.857.857 0 0 0-.857-.857Z'
          ></path>
        </svg>
        <span class='md:hidden text-xl max-md:text-sand'>Shop</span>
      </a>
    </div>

    <div class='md:hidden'>
      <svg
        id='menu-open'
        class='size-8 cursor-pointer'
        xmlns='http://www.w3.org/2000/svg'
        viewBox='0 0 24 24'
        fill='currentColor'
        onclick="this.style.display='none'; document.getElementById('menu-close').style.display='block'; document.getElementById('nav-menu').classList.remove('max-md:hidden').remove('opacity-0').add('flex opacity-100');"
      >
        <svg
          xmlns='http://www.w3.org/2000/svg'
          viewBox='0 0 24 24'
          fill='currentColor'
          class='size-8'
        >
          <path
            fill-rule='evenodd'
            d='M3 9a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 9Zm0 6.75a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z'
            clip-rule='evenodd'></path>
        </svg>
      </svg>

      <svg
        id='menu-close'
        class='size-8 cursor-pointer'
        style='display:none'
        xmlns='http://www.w3.org/2000/svg'
        viewBox='0 0 24 24'
        fill='currentColor'
        onclick="this.style.display='none'; document.getElementById('menu-open').style.display='block'; document.getElementById('nav-menu').classList.add('max-md:hidden').add('opacity-0').remove('opacity-100');"
      >
        <svg
          xmlns='http://www.w3.org/2000/svg'
          viewBox='0 0 24 24'
          fill='currentColor'
          class='size-8'
        >
          <path
            fill-rule='evenodd'
            d='M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z'
            clip-rule='evenodd'></path>
        </svg>
      </svg>
    </div>
  </div>
  <div
    class={`absolute inset-0 ${pathname === '/' ? 'bg-gray-900' : 'bg-gold'}  opacity-10 pointer-events-none`}
  >
  </div>
</div>

<script client:load>
    const h = window.innerHeight
    const header = document.getElementById('header')
    const search = document.getElementById('search')

    if ( window.location.pathname == '/') {
        window.addEventListener('scroll', () => {
        // header.classList.toggle('text-black', window.scrollY > h)
        // search.classList.toggle('border-b-black', window.scrollY > h)
        // header.classList.toggle('text-sand', window.scrollY <= h)
        // search.classList.toggle('border-b-sand', window.scrollY <= h)

        const pastHero = window.scrollY > h
        const isMobile = window.innerWidth <= 768

        header.classList.toggle('text-black', pastHero)
        header.classList.toggle('text-sand', !pastHero)

        search.classList.toggle('border-b-black', pastHero && !isMobile)
        search.classList.toggle('border-b-sand', !pastHero || isMobile)
        })
    }
</script>
